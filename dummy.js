!function(){"use strict";const e=!1,t="gmm",n=chrome||browser,o=".U26fgb.JRY2Pb.mUbCce.kpROve.uJNmj",u=".IYwVEf.uB7U9e.nAZzG",s=100,i={show_badge_for_calls:"all_calls",mute_by_default:!1,off_camera_by_default:!1,single_key_toggle:"off"};A("google-meet-mute");let r,c,a=w(),l=!1,d=new function(o){let u=this;this.port=null,n.runtime.onMessage.addListener(function(t,n,o){e&&A("inject received: ",t,n,o),t&&"changemute"===t.action&&(A("mute status",!t.data.voiceIsMute,f),b(),o(!0))}),this.open=function(){if(!u.port)try{u.port=n.runtime.connect({name:u.getPortName()}),u.port.onDisconnect.addListener(function(){u.port=null,a=w()}),u.port.onMessage.addListener(u.messageCallback)}catch(e){A(e)}},this.getPortName=function(){return t+"__"+c+"__"+a},this.close=function(){u.port&&u.port.disconnect(),u.port=null},this.process=function(e,t){if(g)return;if(g=!0,setTimeout(function(){g=!1},s),-1===["start","update","end","analytics"].indexOf(e))return;if(u.open(),!u.port)return;let n={meetingId:c,meetingName:r||c,meetingIsOn:l,voiceIsMute:f,videoIsMute:m};t&&(n="analytics"===e?t:Object.assign(n,t)),u.port.postMessage({process:e,msg:n}),"end"===e&&setTimeout(function(){u.close()},100)},this.messageCallback=function(e){A("message callback",e),e.process}},f=!1,m=!1,g=!1,p=i;function y(){d.process("update")}function _(e){M(u,!0).then(function(t){!l&&p.hasOwnProperty("mute_by_default")&&!0===p.mute_by_default&&(b(!0),k({t:"event",ea:"Auto Click Button",el:"Button: Microphone"})),!l&&p.hasOwnProperty("off_camera_by_default")&&!0===p.off_camera_by_default&&(b(!0,"camera"),k({t:"event",ea:"Auto Click Button",el:"Button: Camera"})),h(),function(e){var t=document.querySelector(u);new MutationObserver(function(n,o){A("isMuted",t.dataset.isMuted),"function"==typeof e&&e()}).observe(t,{attributes:!0,childList:!1,subtree:!1,characterData:!1})}(h),document.body.onkeyup=function(e){p.hasOwnProperty("single_key_toggle")&&["mic","camera"].includes(p.single_key_toggle)&&32==e.keyCode&&!["DIV","SPAN","TEXTAREA"].includes(e.target.nodeName.toUpperCase())&&b(null,p.single_key_toggle)},"function"==typeof e&&e()})}function h(){f="true"===document.querySelectorAll(o)[0].dataset.isMuted,m="true"===document.querySelectorAll(o)[1].dataset.isMuted,A("Set Mute status",f),y()}function b(e,t){t||(t="mic");let n={mic:0,camera:1}[t]||0;if(!(!0===e&&"true"===document.querySelectorAll(o)[n].dataset.isMuted||!1===e&&"false"===document.querySelectorAll(o)[n].dataset.isMuted))try{A("clicking",t),document.querySelectorAll(o)[n].click()}catch(n){A(n),k({t:"event",ea:"Failed: Click Button ("+(!0===e?"Auto":"User")+")",el:"Button: "+t})}}function w(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}async function M(e,t){for(;n(e);)await new Promise(e=>requestAnimationFrame(e));return!0!==t?document.querySelector(e):document.querySelectorAll(e);function n(e){return!0!==t?null===document.querySelector(e):0===document.querySelectorAll(e).length}}function k(e){let t=document.title,n=window.location.hostname,o=window.location.host,u=window.location.href;(e=e||{}).dl=u,e.dh=o,e.dt=t,e.dp=n,d.process("analytics",e)}function A(){e&&console.log.apply(null,arguments)}!function(e){if(!n||!n.storage)return;k({t:"pageview"}),n.storage.sync.get(["userid","user_settings"],function(t){p=t&&t.user_settings&&Object.keys(t.user_settings).length>0?t.user_settings:i,"function"==typeof e&&e()}),n.storage.onChanged.addListener(function(e,t){e&&(p=e.user_settings&&e.user_settings.newValue&&Object.keys(e.user_settings.newValue).length>0?e.user_settings.newValue:i)})}(function(){(function(){let e=null;try{const t=/^[A-Za-z-]+$/,n=window.location.pathname.split("/")[1];n.match(t)&&(e=n)}catch(e){A("MeetingId error:",e),k({t:"event",ea:"Failed: Set Meeting ID",el:"Error: "+e})}c=e})(),e=y,t=document.querySelector("title"),new MutationObserver(function(t,n){r=function(e){let t="";return e.textContent.startsWith("Meet - ")?t="Meet - ":e.textContent.startsWith("Meet")&&(t="Meet"),e.textContent.substr(t.length)}(t[0].target),"function"==typeof e&&e()}).observe(t,{attributes:!1,childList:!0,subtree:!1,characterData:!1}),_(),A(r),A(c),d.process("start",{meetingId:c,meetingName:r||c}),function(e){M("[data-allocation-index]").then(function(t){A("call started"),l=!0,"function"==typeof e&&e()})}(function(){y(),_(y)}),window.onunload=function(){d.process("end")},window.beforeunload=function(){d.process("end")};var e,t})}();